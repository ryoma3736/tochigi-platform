# ========================================
# データベース設定
# ========================================

# PostgreSQL接続文字列
# ローカル開発: postgresql://user:password@localhost:5432/tochigi_platform
# Supabase: postgresql://postgres:[PASSWORD]@db.xxxxx.supabase.co:5432/postgres
# Neon: postgresql://user:password@ep-xxx.neon.tech/neondb?sslmode=require
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/tochigi_platform"

# 接続プーリング用URL（本番環境推奨）
# Supabase Pooler: postgresql://postgres.[project-ref]:[PASSWORD]@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true
# DATABASE_URL="postgresql://postgres.xxxxx:password@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# ========================================
# アプリケーション設定
# ========================================

# アプリケーションのベースURL
# 開発環境: http://localhost:3000
# 本番環境: https://your-domain.vercel.app または https://your-custom-domain.com
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Node環境（development | production | test）
NODE_ENV="development"

# ========================================
# NextAuth認証設定
# ========================================

# NextAuthのベースURL（本番環境では必須）
# 開発環境: http://localhost:3000
# 本番環境: https://your-domain.vercel.app
NEXTAUTH_URL="http://localhost:3000"

# NextAuthのシークレットキー（必須）
# 生成コマンド: openssl rand -base64 32
# NextAuth v5ではAUTH_SECRETを推奨
AUTH_SECRET="your_nextauth_secret_here_generate_with_openssl_rand_base64_32"
NEXTAUTH_SECRET="your_nextauth_secret_here_generate_with_openssl_rand_base64_32"

# ========================================
# Instagram Graph API設定
# ========================================

# Instagram App ID（Meta for Developersで取得）
INSTAGRAM_CLIENT_ID="your_instagram_client_id"

# Instagram App Secret（Meta for Developersで取得）
INSTAGRAM_CLIENT_SECRET="your_instagram_client_secret"

# Instagram OAuth リダイレクトURI
# 開発環境: http://localhost:3000/api/instagram/callback
# 本番環境: https://your-domain.vercel.app/api/instagram/callback
# Meta for Developersで必ず登録すること
INSTAGRAM_REDIRECT_URI="http://localhost:3000/api/instagram/callback"

# Instagram API バージョン（オプション）
INSTAGRAM_API_VERSION="v19.0"

# ========================================
# Stripe決済設定
# ========================================

# Stripe Secret Key（サーバーサイドで使用）
# テストモード: sk_test_xxxxx
# 本番モード: sk_live_xxxxx
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"

# Stripe Publishable Key（クライアントサイドで使用）
# テストモード: pk_test_xxxxx
# 本番モード: pk_live_xxxxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"

# Stripe Webhook署名シークレット
# Stripe Dashboard → Webhooks → Signing secretから取得
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_secret"

# ========================================
# Stripe商品価格ID設定
# ========================================

# Instagramのみプランの価格ID
# Stripe Dashboard → Products → 該当商品 → Price IDから取得
STRIPE_PRICE_INSTAGRAM_ONLY="price_instagram_only_id"

# フルプラットフォームプランの価格ID
STRIPE_PRICE_PLATFORM_FULL="price_platform_full_id"

# プラン金額（表示用、円建て）
NEXT_PUBLIC_PRICE_INSTAGRAM_ONLY="5000"
NEXT_PUBLIC_PRICE_PLATFORM_FULL="10000"

# ========================================
# SendGrid メール配信設定
# ========================================

# SendGrid API Key
# SendGrid Dashboard → Settings → API Keysで生成
# Full Access権限推奨
SENDGRID_API_KEY="SG.your_sendgrid_api_key"

# 送信元メールアドレス
# SendGrid Dashboard → Settings → Sender Authenticationで認証必須
SENDGRID_FROM_EMAIL="noreply@tochigi-platform.com"

# 送信元名（オプション）
SENDGRID_FROM_NAME="栃木プラットフォーム"

# 返信先メールアドレス（オプション）
SENDGRID_REPLY_TO="support@tochigi-platform.com"

# メールテンプレートID（SendGridで作成した場合）
# SENDGRID_TEMPLATE_INQUIRY="d-xxxxx"
# SENDGRID_TEMPLATE_WELCOME="d-xxxxx"

# ========================================
# Cronジョブセキュリティ
# ========================================

# Cronジョブエンドポイント保護用のシークレット
# 生成コマンド: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Cronジョブ実行時にクエリパラメータとして使用: ?secret=YOUR_CRON_SECRET
CRON_SECRET="your_secure_random_string_for_cron_jobs_min_32_characters"

# ========================================
# 機能フラグ（オプション）
# ========================================

# Instagram連携機能を有効化（true | false）
NEXT_PUBLIC_ENABLE_INSTAGRAM="true"

# サブスクリプション機能を有効化（true | false）
NEXT_PUBLIC_ENABLE_SUBSCRIPTION="true"

# デバッグモード（開発時のみtrue推奨）
NEXT_PUBLIC_DEBUG_MODE="false"

# ========================================
# ロギング・モニタリング（オプション）
# ========================================

# Sentry DSN（エラートラッキング）
# NEXT_PUBLIC_SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"

# Google Analytics Tracking ID
# NEXT_PUBLIC_GA_TRACKING_ID="G-XXXXXXXXXX"

# ========================================
# レート制限設定（オプション）
# ========================================

# API レート制限（リクエスト/分）
RATE_LIMIT_MAX="100"

# レート制限ウィンドウ（ミリ秒）
RATE_LIMIT_WINDOW="60000"

# ========================================
# キャッシュ設定（オプション）
# ========================================

# Redis URL（キャッシュ用、オプション）
# REDIS_URL="redis://localhost:6379"

# データ再検証時間（秒）
REVALIDATE_TIME="3600"
